from database import db

def test_database_connection():
    print("ğŸ§ª Testing Database Connection...")
    
    # Test 1: Basic connection
    try:
        conn = db.get_connection()
        if conn:
            print("âœ… Database connection successful!")
            
            # Test 2: Check if tables exist
            tables_query = """
            SELECT TABLE_NAME 
            FROM INFORMATION_SCHEMA.TABLES 
            WHERE TABLE_TYPE = 'BASE TABLE'
            """
            tables = db.execute_query(tables_query)
            
            print(f"ğŸ“‹ Found {len(tables)} tables:")
            for table in tables['TABLE_NAME']:
                print(f"   - {table}")
            
            conn.close()
            return True
        else:
            print("âŒ Database connection failed!")
            return False
            
    except Exception as e:
        print(f"âŒ Error: {e}")
        return False

if __name__ == "__main__":
    if test_database_connection():
        print("\nğŸ‰ Your database connection is working perfectly!")
        print("ğŸš€ You can now run your main application!")
    else:
        print("\nğŸ’¡ If connection failed, try these connection strings:")
        print("1. r\"Driver={SQL Server Native Client 11.0};Server=localhost\\SQLEXPRESS;Database=HotelBookingSystem;Trusted_Connection=yes;\"")
        print("2. r\"Driver={ODBC Driver 17 for SQL Server};Server=localhost\\SQLEXPRESS;Database=HotelBookingSystem;Trusted_Connection=yes;\"")